<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>StockRiskTracker</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
</head>

<body>

    <div class="container">

        <div class="sidebar">
            <div class="logo-section">
                <div class="logo">ðŸ“ˆ</div>
                <h2>StockRiskTracker</h2>
            </div>
            <a href="#" class="active">Dashboard</a>
            <a href="{% url 'watchlist' %}">Watchlist</a>
            <a href="{% url 'history' %}">History</a>
            <a href="{% url 'dictionary' %}">Dictionary</a>
            <a href="#" class="logout-btn">Logout</a>
        </div>

        <div class="main">
            <div class="header-top">
                <h1>Dashboard</h1>
                <div class="profile-section">
                    <img src="{% static 'image/profile.jpg' %}" alt="User Profile" class="profile-avatar" id="profileBtn">
                    <div class="profile-menu" id="profileMenu">
                        <a href="{% url 'profile' %}">Profile</a>
                        <a href="#" class="menu-logout">Logout</a>
                    </div>
                </div>
            </div>

            <div class="top-info">
                <div class="wallet-box">
                    <div class="wallet-label">Wallet Balance</div>
                    <div class="wallet-amount">{% if wallet_balance %}â‚¹ {{ wallet_balance }}{% else %}â‚¹ 0.00{% endif %}</div>
                </div>

                <div class="user-risk-box">
                    <div class="user-risk-center">
                        <div class="user-risk-dot {% if user_risk == 'SAFE' %}safe{% else %}risky{% endif %}"></div>
                        <div class="user-risk-info">
                            <h4>Risk Status</h4>
                            <div class="user-risk-status {% if user_risk == 'SAFE' %}safe{% else %}risky{% endif %}">
                                {% if user_risk %}{{ user_risk }}{% else %}--{% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="watchlist">
                <h3>Stocks</h3>

                <div class="stock-cards-horizontal">
                    <div class="stock-card safe" onclick="goToReport('Reliance')" style="cursor: pointer;">
                        <div class="card-header">
                            <img src="{% static 'image/reliance-logo.png' %}" alt="Reliance" class="company-logo">
                            <h4>Reliance</h4>
                        </div>
                        <p class="price">â‚¹ 2,456.80</p>
                        <p class="status">SAFE</p>
                    </div>

                    <div class="stock-card risky" onclick="goToReport('Adani Power')" style="cursor: pointer;">
                        <div class="card-header">
                            <img src="{% static 'image/adani-logo.png' %}" alt="Adani Power" class="company-logo">
                            <h4>Adani Power</h4>
                        </div>
                        <p class="price">â‚¹ 312.40</p>
                        <p class="status">RISKY</p>
                    </div>

                    <div class="stock-card safe" onclick="goToReport('TCS')" style="cursor: pointer;">
                        <div class="card-header">
                            <img src="{% static 'image/tcs-logo.jpg' %}" alt="TCS" class="company-logo">
                            <h4>TCS</h4>
                        </div>
                        <p class="price">â‚¹ 3,340.00</p>
                        <p class="status">SAFE</p>
                    </div>
                </div>

            </div>

        </div>

    </div>

    <script>
        // Profile menu toggle
        const profileBtn = document.getElementById('profileBtn');
        const profileMenu = document.getElementById('profileMenu');

        profileBtn.addEventListener('click', function() {
            profileMenu.classList.toggle('active');
        });

        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.profile-section')) {
                profileMenu.classList.remove('active');
            }
        });

        // Navigate to report page
        function goToReport(stockName) {
            window.location.href = '{% url "report" %}?stock=' + encodeURIComponent(stockName);
        }
    </script>

</body>

</html>